
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Wordpress Categories Filter - RTalks.net</title>
    
    <meta name="author" content="Randy Lai">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css" rel="stylesheet">
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>  
<script>
  (function() {
    var cx = '008225976323914720770:ha27dsnxije';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<link href="/assets/css/pygments.css" rel="stylesheet" type="text/css" media="all">
<link href="/assets/css/style.css" rel="stylesheet" type="text/css" media="all">

<!-- <link rel="shortcut icon" href="images/favicon.ico">
<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png"> -->

<!--     <link href="" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed"> -->

</head>

<body>   
    <div class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>         
                <div class="navbar-brand"><span class="glyphicon glyphicon-th-large"></span> <a href="/">RTalks.net</a></div>
            </div>
            <div class="collapse navbar-collapse" id="navbar-collapse-1">
                <ul class="nav navbar-nav">
                             
                    
                    
                    
                    <li ><a href="/research/">Research</a></li>
                    
                    
                    
                    <li ><a href="/apps/">Apps</a></li>
                    
                    
                    
                    <li ><a href="/blog/">Blog</a></li>
                    
                    
                    
                    <li ><a href="/tags/">Tags</a></li>
                      
                </ul>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-9" id="page-col">
                <div id="page">
                    <div class="jumbotron" id="page-jumbotron">
                        <h1>
                        <span class="glyphicon glyphicon-book"></span> Wordpress Categories Filter 
                        </h1>
                        
                    </div>
                    <div class="content">
                        <p><span class="date">October 27 2013</span>  </p>
<p>You probably need change our category number, but this is how the filtering works.</p>

<pre><code>&lt;?php
/*
Plugin Name: My Filter
*/

// Exit if accessed directly
if ( !defined('ABSPATH')) exit;

# to exclude the category testing
function exclude_category($query) {
if ($query-&gt;is_search) {
$query-&gt;set('cat', '-3');
}
return $query;
}
add_filter('pre_get_posts', 'exclude_category');

function exclude_widget_categories($args) {
$exclude = "3"; // The IDs of the excluding categories
$args["exclude"] = $exclude;
return $args;
}

add_filter("widget_categories_args","exclude_widget_categories");

function myFilter($query) {
if ($query-&gt;is_home) {
$query-&gt;set('cat','-3');
}
return $query;
}
add_filter('pre_get_posts','myFilter');

function exclude_stuff($query) {
if ( $query-&gt;is_date) {
$query-&gt;set('cat', '-3');
}
return $query;
}
add_filter('pre_get_posts', 'exclude_stuff');

add_filter( 'getarchives_where', 'customarchives_where' );
add_filter( 'getarchives_join', 'customarchives_join' );

function customarchives_join( $x ) {
global $wpdb;
return $x . " INNER JOIN $wpdb-&gt;term_relationships ON ($wpdb-&gt;posts.ID = $wpdb-&gt;term_relationships.object_id) INNER JOIN $wpdb-&gt;term_taxonomy ON ($wpdb-&gt;term_relationships.term_taxonomy_id = $wpdb-&gt;term_taxonomy.term_taxonomy_id)";
}

function customarchives_where( $x ) {
global $wpdb;
$exclude = '3'; // category id to exclude
return $x . " AND $wpdb-&gt;term_taxonomy.taxonomy = 'category' AND $wpdb-&gt;term_taxonomy.term_id NOT IN ($exclude)";
}

?&gt;
</code></pre>





<ul class="tag-box inline list-unstyled">
  <li class="tag-icon"><span class="glyphicon glyphicon-tags"></span></li>

  
     
    	<li><a class="btn btn-default btn-xs" href="/tags/#wordpress-ref">wordpress <span class="tag-size">1</span></a></li>
     
    	<li><a class="btn btn-default btn-xs" href="/tags/#php-ref">php <span class="tag-size">1</span></a></li>
    
  


</ul>
  


<ul class="pagination">
    
    <li class="prev"><a href="/blog/2013/10/24/python-web-server" title="A simple python webserver">&larr; Previous</a></li>
    
    <li><a href="/blog/archive/">Archive</a></li>
    
    <li class="next"><a href="/blog/2013/11/27/rprofile-customization" title=".Rprofile Customization">Next &rarr;</a></li>
    
</ul>

<hr>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'randy3k'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>


                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-sm-6 col-md-3" id="sider-col">
                <div id="sider">
                    <div class="reset-box-sizing sider-item">
                        <p>Site search by Google:</p> <gcse:searchbox-only></gcse:searchbox-only>
                    </div>
                    
                    <div class="sider-item"><a href="/archive">Blog Archive</a></div>
                </div>                
            </div>            
        </div>
        <hr>
        <footer>
            <p>&copy; 2013 Randy Lai. Powered by <a href="http:///github.com/randy3k", target="_blank"><img width="20" style="vertical-align:text-bottom" src="https://github.global.ssl.fastly.net/images/modules/logos_page/GitHub-Mark.png"></a>. 
            </p>
        </footer>                  
   </div>     

</body>
</html>
