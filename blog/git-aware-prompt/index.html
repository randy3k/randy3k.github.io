<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Git aware prompt - RTalks.net</title>
    
    <meta name="author" content="Randy Lai">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<!-- <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css" rel="stylesheet"> -->
<link href="/assets/css/bootstrap.css" rel="stylesheet" type="text/css" media="all">
<link href="/assets/css/pygments.css" rel="stylesheet" type="text/css" media="all">
<link href="/assets/css/style.css" rel="stylesheet" type="text/css" media="all">

<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>  
<script>
  (function() {
    var cx = '008225976323914720770:ha27dsnxije';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>

</head>

<body>   
    <div class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>         
                <div><a href="/" class="navbar-brand">RTalks.net</a></div>
            </div>
            <div class="collapse navbar-collapse" id="navbar-collapse-1">
                <ul class="nav navbar-nav">
                       
                    <li ><a href="/research/">Research</a></li>
                      
                    <li ><a href="/apps/">Apps</a></li>
                      
                    <li ><a href="/blog/">Blog</a></li>
                      
                </ul>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-9">
                <div class="jumbotron">
                    <h1>
                    <span class="fa fa-sign-in"></span> Git aware prompt 
                    </h1>
                    
                </div>
                <div class="content">
                    <p><span class="date">February 12 2014</span>

</p>



<ul class="tag-box inline list-unstyled">
  <li class="tag-icon"><span class="glyphicon glyphicon-tags"></span></li>

   
  	<li><a class="btn btn-success btn-xs" href="/blog/tags/#git-ref">git <span class="tag-size">1</span></a></li>
  

</ul>
  


<p>I love using Git via commands. And it is very often that I have to run <code>git status</code> or <code>git branch</code> to check if I am on the right branch or I am doing anything correct. Git aware prompt displays the current branch and status of the current directory.</p>

<p>The code was originated from <a href="http://bytebaker.com/2012/01/09/show-git-information-in-your-prompt/">here</a> but I have made significant amount of changes, for example, adding color support and some bugs fixing.</p>

<p><img src="/assets/images/git.png" style="border:1px solid grey" /></p>

<p>To use this, add the following to your <code>.bashrc</code> and restart your terminal!</p>

<div class="highlight"><pre><code class="bash"><span class="k">function </span>git-branch-name
<span class="o">{</span>
    <span class="nb">echo</span> <span class="k">$(</span>git symbolic-ref HEAD 2&gt;/dev/null <span class="p">|</span> awk -F/ <span class="o">{</span><span class="s1">&#39;print $NF&#39;</span><span class="o">}</span><span class="k">)</span>
<span class="o">}</span>
<span class="k">function </span>git-dirty <span class="o">{</span>
    <span class="nv">st</span><span class="o">=</span><span class="k">$(</span>git status 2&gt;/dev/null <span class="p">|</span> tail -n 1<span class="k">)</span>
    <span class="k">if</span> <span class="o">[[</span> <span class="nv">$st</span> !<span class="o">=</span> <span class="s2">&quot;nothing to commit, working directory clean&quot;</span> <span class="o">]]</span>
    <span class="k">then</span>
<span class="k">        </span><span class="nb">echo</span> <span class="s2">&quot;*&quot;</span>
    <span class="k">fi</span>
<span class="o">}</span>
<span class="k">function </span>git-unpushed <span class="o">{</span>
    <span class="nv">brinfo</span><span class="o">=</span><span class="sb">`</span>git branch -v <span class="p">|</span> grep <span class="k">$(</span>git-branch-name<span class="k">)</span><span class="sb">`</span>
    <span class="k">if</span> <span class="o">[[</span> <span class="nv">$brinfo</span> <span class="o">=</span>~ <span class="o">(</span><span class="s2">&quot;[ahead &quot;</span><span class="o">([[</span>:digit:<span class="o">]]</span>*<span class="o">)])</span> <span class="o">]]</span>
    <span class="k">then</span>
<span class="k">        </span><span class="nb">echo</span> <span class="s2">&quot;+${BASH_REMATCH[2]}&quot;</span>
    <span class="k">fi</span>
<span class="o">}</span>
<span class="k">function </span>gitcolor <span class="o">{</span>
    <span class="nv">status</span><span class="o">=</span><span class="k">$(</span>git status 2&gt;/dev/null <span class="p">|</span> head -n 1<span class="k">)</span>
    <span class="k">if</span> <span class="o">[[</span> <span class="nv">$status</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="o">]]</span>
    <span class="k">then</span>
<span class="k">        </span><span class="nb">echo</span> <span class="s2">&quot;&quot;</span>
    <span class="k">else</span>
<span class="k">        if</span> <span class="o">[[</span> <span class="k">$(</span>git-dirty<span class="k">)</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span> <span class="o">]]</span><span class="p">;</span>
        <span class="k">then</span>
<span class="k">            </span><span class="nv">color</span><span class="o">=</span><span class="s2">&quot;\033[31m&quot;</span>
        <span class="k">else</span>
<span class="k">            </span><span class="nv">color</span><span class="o">=</span><span class="s2">&quot;\033[32m&quot;</span>
        <span class="k">fi</span>
<span class="k">        </span><span class="nb">echo</span> -e <span class="s2">&quot;${color}&quot;</span>
    <span class="k">fi</span>
<span class="o">}</span>

<span class="k">function </span>gitify <span class="o">{</span>
    <span class="nv">status</span><span class="o">=</span><span class="k">$(</span>git status 2&gt;/dev/null <span class="p">|</span> head -n 1<span class="k">)</span>
    <span class="k">if</span> <span class="o">[[</span> <span class="nv">$status</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="o">]]</span>
    <span class="k">then</span>
<span class="k">        </span><span class="nb">echo</span> <span class="s2">&quot;&quot;</span>
    <span class="k">else</span>
<span class="k">        </span><span class="nb">echo</span> -e <span class="s2">&quot; ($(git-branch-name)$(git-dirty)$(git-unpushed))&quot;</span>
    <span class="k">fi</span>
<span class="o">}</span>

<span class="nb">export </span><span class="nv">PS1</span><span class="o">=</span><span class="s2">&quot;(\h)-\W\[\$(gitcolor)\]\$(gitify)\[\033[00m\]\$ &quot;</span>
</code></pre></div>


<ul class="pagination">
    
    <li class="prev"><a href="/blog/shortcuts-in-osx-terminal/" title="Shortcuts in OSX-Terminal">&larr; Previous</a></li>
    
    <li><a href="/blog/archive/">Archive</a></li>
    
    <li class="next disabled"><a>Next &rarr;</a>
    
</ul>

<hr>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'randy3k'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>


                </div>
            </div>         
            <div class="col-xs-12 col-sm-6 col-md-3">
                    <div class="reset-box-sizing search">
                        <p>Site search by Google:</p> <gcse:searchbox-only></gcse:searchbox-only>
                    </div>              
            </div> 
        </div>        
        <hr>
        <footer>
            <p>&copy; 2014 Randy Lai. Host on <a href="//github.com/randy3k">Github</a>, generated by <a href="//jekyllrb.com">Jekyll</a> and themed by <a href="//getbootstrap.com">Bootstrap 3</a>.
            </p>
        </footer>                  
   </div>     

</body>
</html>
