---
layout: post
category : computing
title: "Installating open-mpi on Mac"
tagline: ""
tags : [r, osx, mavericks]
---

This is a guide for installing <code>open-mpi</code> and <code>Rmpi</code> on Mac OSX.
<code>Open-mpi</code> is open source mpi library such allows scalable and parallel processing. To install <code>open-mpi</code>, you will need to install <a href="http://brew.sh">Homebrew</a> first. Then install <code>gfortran</code> and <code>open-mpi</code>
<pre class="lang:sh decode:true">brew install gfortran
brew install open-mpi</pre>
You will need a C complier. For OSX 10.9, see <a href="index?p=210">Configuring complier for R 3.0.1 on OSX 10.9 Mavericks</a>. For previous OS, the default llvm-gcc complier should work fine.

Final step, either open R in terminal or R GUI, and run
 
<pre class="lang:r decode:true " >install.packages("Rmpi", type="source")</pre> 


This should install <code>Rmpi</code>.

To test <code>Rmpi</code>
 
<pre class="lang:r decode:true " >library(Rmpi)
mpi.spawn.Rslaves()
mpi.iparReplicate(100, mean(rnorm(1000000)))
mpi.close.Rslaves()</pre> 

Note: If you compile your own R, or install R via Homebrew or macport, it is more likely that Rmpi will fail to detect number of cores via <code>mpi.universe.size()</code>. In this case, you may need to specify the number of salves.

 
<pre class="lang:r decode:true " >library(Rmpi)
mpi.spawn.Rslaves(nslaves=3)
mpi.iparReplicate(100, mean(rnorm(1000000)))
mpi.close.Rslaves()</pre> 